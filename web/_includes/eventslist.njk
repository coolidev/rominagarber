<ol reversed class="eventlist" style="counter-reset: start-from {{ eventsList.length + 1 }}">

{% set eventCount = 0 %}
{% set pastEventsList = false %}

{% if not eventsLimit %}
  {% set eventsLimit = eventsList.length %}
{% endif %}

{% for event in eventsList %}
  {% if eventCount < eventsLimit %}
    {% set currentEvent = event.data.event %}

    {% if currentEvent.content.slug.current in page.url %}
      {% set eventsLimit = eventsLimit + 1 %}
    {% else %}
      <li class="eventlist-item{% if currentEvent.content.schedule.to | isPastEvent %} eventlist-item-past{% endif %}">

      {% if currentEvent.content.venue.shortcode %}
        {# create the colored city block #}
        <span style="background-color: {{ currentEvent.content.venue.color }}">
          <h2>{{- currentEvent.content.venue.shortcode -}}</h2>
        </span>
      {% endif %}

      <div class="eventlist-item__data">

        <time class="eventlist-date" datetime="{{ currentEvent.content.schedule.from }}">
          {{- currentEvent.content.schedule.from | readableDate -}}
        </time>

        <div class="eventlist-item__links">

        <a href="{{ event.url | url }}" class="eventlist-link">

        {%- if currentEvent.content.name %}
          {{- currentEvent.content.name -}}
        {% else %}
          <code>
            {{- event.url -}}
          </code>
        {% endif -%}

        </a>

        </div>
      </div>

      </li>

    {% endif %}
  {% endif %}
{% set eventCount = eventCount + 1 %}
{% endfor %}
</ol>
